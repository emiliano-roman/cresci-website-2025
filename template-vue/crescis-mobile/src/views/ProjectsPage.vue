<template>
    
    <!-- page content -->
    <div id="page-content" class="bg-dark padding-top-30-p no-padding-bottom">

    <section class="project-item">
        <div class="cs-row">
            <div class="cs-col-lg-12">
                <div class="panel-project" data-url="https://cresci.co/willow/">
                    <div class="title-project">
                        <h1 words-move-up text-split>Willow</h1>
                    </div>
                    <figure id="linkItem" class="anim-fadeinup" data-href="https://cresci.co/willow/"><img class="xl-image" data-src="projects/mobile/willow.webp" alt="Cresci's - Willow" src="/projects/mobile/willow.webp"></figure>
                    <div class="list-detail">
                        <ul  words-move-up text-split>
                            <li>STRATEGY</li>
                            <li>ANIMATION</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="project-item">
        <div class="cs-row">
            <div class="cs-col-lg-12">
                <div class="panel-project" data-url="https://cresci.co/salesforce">
                    <div class="title-project">
                        <h1 words-move-up text-split>Salesforce</h1>
                    </div>
                    <figure id="linkItem" class="anim-fadeinup" data-href="https://cresci.co/salesforce"><img class="xl-image" data-src="projects/mobile/salesforce.webp" alt="Cresci's - Salesforce" src="/projects/mobile/salesforce.webp"></figure>
                    <div class="list-detail">
                        <ul  words-move-up text-split>
                            <li>STRATEGY</li>
                            <li>ANIMATION</li>
                            <li>EVENTS IN MOTION</li>
                            <li>UX/UI</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="project-item">
        <div class="cs-row">
            <div class="cs-col-lg-12">
                <div class="panel-project" data-url="/project/Docusign24">
                    <div class="title-project">
                        <h1 words-move-up text-split>Docusign 24</h1>
                    </div>
                    <figure id="linkItem" class="anim-fadeinup" data-href="/m/project/Docusign24"><img class="xl-image" data-src="projects/mobile/docusign24.webp" alt="Cresci's - Docusign" src="/projects/mobile/docusign24.webp"></figure>
                    <div class="list-detail">
                        <ul  words-move-up text-split>
                            <li>BRANDING</li>
                            <li>EVENTS IN MOTION</li>
                            <li>ANIMATION</li>
                            <li>UX/UI</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="project-item">
        <div class="cs-row">
            <div class="cs-col-lg-12">
                <div class="panel-project" data-url="/project/7Studio">
                    <div class="title-project">
                      <h1 words-move-up text-split>7 Studio</h1>
                    </div>
                    <figure id="linkItem" class="anim-fadeinup" data-href="/m/project/7Studio"><img class="xl-image" data-src="projects/mobile/7studio.webp" alt="Cresci's - 7 Studio" src="projects/mobile/7studio.webp"></figure>
                    <div class="list-detail">
                        <ul  words-move-up text-split>
                            <li>STRATEGY</li>
                            <li>BRANDING</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="project-item">
        <div class="cs-row">
            <div class="cs-col-lg-12">
                <div class="panel-project" data-url="/project/Google">
                    <div class="title-project">
                        <h1 words-move-up text-split>Google</h1>
                    </div>
                    <figure id="linkItem" class="anim-fadeinup" data-href="/m/project/Google"><img class="xl-image" data-src="projects/mobile/google.webp" alt="Cresci's - Google" src="/projects/mobile/google.webp"></figure>
                    <div class="list-detail">
                        <ul  words-move-up text-split>
                            <li>ANIMATION</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    
    <section class="project-item">
        <div class="cs-row">
            <div class="cs-col-lg-12">
                <div class="panel-project" data-url="/project/DpWorld">
                    <div class="title-project">
                        <h1 words-move-up text-split>DP WORLD</h1>
                    </div>
                    <figure id="linkItem" class="anim-fadeinup" data-href="/m/project/DpWorld"><img class="xl-image" data-src="projects/mobile/dpworld.webp" alt="Cresci's - DP WORLD" src="/projects/mobile/dpworld.webp"></figure>
                    <div class="list-detail">
                        <ul  words-move-up text-split>
                            <li>ANIMATION</li>
                            <li>EVENTS IN MOTION</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
    

    <section class="project-item">
        <div class="cs-row">
            <div class="cs-col-lg-12">
                <div class="panel-project" data-url="/project/Synapse">
                    <div class="title-project">
                        <h1 words-move-up text-split>Synapse</h1>
                    </div>
                    <figure id="linkItem" class="anim-fadeinup" data-href="/m/project/Synapse"><img class="xl-image" data-src="projects/mobile/synapse.webp" alt="Cresci's - Synapse" src="/projects/mobile/synapse.webp"></figure>
                    <div class="list-detail">
                        <ul  words-move-up text-split>
                            <li>STRATEGY</li>
                            <li>BRANDING</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <section class="project-item">
        <div class="cs-row">
            <div class="cs-col-lg-12">
                <div class="panel-project" data-url="/project/Docusign23">
                    <div class="title-project">
                        <h1 words-move-up text-split>Docusign '23</h1>
                    </div>
                    <figure id="linkItem" class="anim-fadeinup" data-href="/m/project/Docusign23"><img class="xl-image" data-src="projects/mobile/docusign23.webp" alt="Cresci's - Docusign '23" src="/projects/mobile/docusign23.webp"></figure>
                    <div class="list-detail">
                        <ul  words-move-up text-split>
                            <li>STRATEGY</li>
                            <li>ANIMATION</li>
                            <li>EVENTS IN MOTION</li>
                            <li>UX/UI</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <section class="project-item">
        <div class="cs-row">
            <div class="cs-col-lg-12">
                <div class="panel-project" data-url="/project/Penta">
                    <div class="title-project">
                        <h1 words-move-up text-split>Penta</h1>
                    </div>
                    <figure id="linkItem" class="anim-fadeinup" data-href="/m/project/Penta"><img class="xl-image" data-src="projects/mobile/penta.webp" alt="Cresci's - Penta" src="/projects/mobile/penta.webp"></figure>
                    <div class="list-detail">
                        <ul  words-move-up text-split>
                            <li>STRATEGY</li>
                            <li>EBRANDING</li>
                            <li>ANIMATION</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <section class="project-item">
        <div class="cs-row">
            <div class="cs-col-lg-12">
                <div class="panel-project" data-url="/project/TheSandbox">
                    <div class="title-project">
                        <h1 words-move-up text-split>The Sandbox</h1>
                    </div>
                    <figure id="linkItem" class="anim-fadeinup" data-href="/m/project/TheSandbox"><img class="xl-image" data-src="projects/mobile/thesandbox.webp" alt="Cresci's - The Sandbox" src="/projects/mobile/thesandbox.webp"></figure>
                    <div class="list-detail">
                        <ul  words-move-up text-split>
                            <li>BRANDING</li>
                            <li>ANIMATION</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <section class="project-item">
        <div class="cs-row">
            <div class="cs-col-lg-12">
                <div class="panel-project" data-url="/project/Decoded">
                    <div class="title-project">
                        <h1 words-move-up text-split>Decoded</h1>
                    </div>
                    <figure id="linkItem" class="anim-fadeinup" data-href="/m/project/Decoded"><img class="xl-image" data-src="projects/mobile/decoded.webp" alt="Cresci's - Decoded" src="/projects/mobile/decoded.webp"></figure>
                    <div class="list-detail">
                        <ul  words-move-up text-split>
                            <li>ANIMATION</li>
                            <li>EVENTS IN MOTION</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <section class="project-item">
        <div class="cs-row">
            <div class="cs-col-lg-12">
                <div class="panel-project" data-url="/project/OldGlory">
                    <div class="title-project">
                        <h1 words-move-up text-split>Old Glory</h1>
                    </div>
                    <figure id="linkItem" class="anim-fadeinup" data-href="/m/project/OldGlory"><img class="xl-image" data-src="projects/mobile/oldglory.webp" alt="Cresci's - Old Glory" src="/projects/mobile/oldglory.webp"></figure>
                    <div class="list-detail">
                        <ul  words-move-up text-split>
                            <li>ANIMATION</li>
                            <li>BRANDING</li>
                            <li>STRATEGY</li>
                            <li>UX/UI & DEVELOPMENT</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <section class="project-item">
        <div class="cs-row">
            <div class="cs-col-lg-12">
                <div class="panel-project" data-url="/project/17Sigma">
                    <div class="title-project">
                        <h1 words-move-up text-split>17 Sigma</h1>
                    </div>
                    <figure id="linkItem" class="anim-fadeinup" data-href="/m/project/17Sigma"><img class="xl-image" data-src="projects/mobile/17Sigma.webp" alt="Cresci's - 17 Sigma" src="/projects/mobile/17Sigma.webp"></figure>
                    <div class="list-detail">
                        <ul  words-move-up text-split>
                            <li>BRANDING</li>
                            <li>UX/UI DEVELOPMENT</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

   </div>
    <!-- End page content -->
  </template>
  
  
  <script>
    import { initializeLenis, pageTransition, menuSite, navbarFix, updateHeaderTheme, animationsEfx  } from '../assets/js/scriptsApp.js'; // Importar funciones de otros scripts
    // eslint-disable-next-line no-unused-vars
    import gsap from 'gsap'; // Importar GSAP
    // eslint-disable-next-line no-unused-vars
    import { ScrollTrigger } from 'gsap/ScrollTrigger'; // Importar ScrollTrigger
    // importar initTextAnimations
    import { initTextAnimations } from '../assets/js/textAnimations.js'; // Importar animaciones de texto
    gsap.registerPlugin(ScrollTrigger); // plugin ScrollTrigger 

    export default {
      name: 'ProjectsPage',

      mounted() {
          initializeLenis();
          pageTransition();
          menuSite();
          navbarFix();
          animationsEfx();
          updateHeaderTheme(); // actualizar el theme
            this.initLinkAnimation(); 
            this.removeBodyClasses(); 
            this.removeContentColor(); 
          // Llama a las animaciones una vez que el DOM ha sido montado
          this.$nextTick(() => {
            initTextAnimations();
          });
    },
    methods: {
      initLinkAnimation() {
        const figures = document.querySelectorAll('#linkItem'); // Seleccionamos los elementos de los links
        const body = document.body;

        figures.forEach(figure => {
            const href = figure.dataset.href;

            // Prefetch al hover
            figure.addEventListener('mouseenter', function () {
                console.log("Hover en el link:", figure); // Agregar aquí el console.log
                if (!document.querySelector(`link[rel="prefetch"][href="${href}"]`)) {
                    const link = document.createElement('link');
                    link.rel = 'prefetch';
                    link.href = href;
                    document.head.appendChild(link);
                }
            });

            figure.addEventListener('click', function () {

                // Si el href es un enlace externo, abrir en nueva pestaña
                if (href.startsWith('http')) {
                    window.open(href, '_blank');
                    return; // Salir para evitar ejecutar el resto del código
                }

                // Ocultar el cursor mágico y bloquear clics
                body.style.pointerEvents = 'none';

                const img = figure.querySelector('img');
                const titleH1 = figure.closest('.panel-project').querySelector('.title-project h1');
                const titleH6 = figure.closest('.panel-project').querySelector('.list-detail');
                // const titleDate = figure.closest('.panel-project').querySelector('.cs-ps-caption-date');
                // const titleOl = figure.closest('.panel-project').querySelector('.cs-ps-caption-ol');

                // Comprobar si los elementos existen antes de animar
                if (img && titleH1 && titleH6 ) {
                    // Animaciones
                    gsap.to([titleH6, titleH1, ], {
                        duration: 0.8,
                        y: 180,
                        opacity: 0,
                        stagger: 0.1,
                        ease: "power4.inOut"
                    });

                    gsap.to(img, {
                        delay: 0.3,
                        duration: 1,
                        scale: 1.1,
                        ease: "power4.inOut"
                    });

                    figure.style.clipPath = 'inset(0 0 0 0)';

                    setTimeout(() => {
                        gsap.to(figure , {
                            duration: 1,
                            delay: 1.1,
                            width: "90vw",
                            scale: 1,
                            ease: "power4.inOut",
                            onComplete: () => {
                              sessionStorage.setItem("redirected", "true");
                              // Cambia aquí para que redirija solo si no es externo
                              if (!href.startsWith('http')) {
                                  window.location.assign(href);
                              }
                            }
                        });
                    }, 0);
                }
            });
        });
    },

    removeBodyClasses() {
        const body = document.getElementById('body');
        if (body) {
        // body.classList.remove('theme-white', 'cs-transition'); // Eliminar las clases
        body.classList.remove('theme-white'); // Eliminar la clase 
        body.classList.add('theme-dark'); // Agregar la clase 'theme-dark'
        }
    },
    removeContentColor() {
      const contentColor = document.getElementById('contente-z1');
      if (contentColor) {
        contentColor.classList.remove('bg-white'); 
        contentColor.classList.add('bg-dark'); 
      }
    },


    },
  }
  </script>
  
  
  <style scoped>

  </style>
  